<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Exposing Redis | Redis Operator</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="A golang based redis operator that will make/oversee Redis standalone/cluster mode setup on top of the Kubernetes.">
    <meta name="theme-color" content="#0065b3">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/redis-operator/assets/css/0.styles.c80de09e.css" as="style"><link rel="preload" href="/redis-operator/assets/js/app.5e5a4b40.js" as="script"><link rel="preload" href="/redis-operator/assets/js/2.abb6d572.js" as="script"><link rel="preload" href="/redis-operator/assets/js/16.2eea0f73.js" as="script"><link rel="prefetch" href="/redis-operator/assets/js/10.492ae902.js"><link rel="prefetch" href="/redis-operator/assets/js/11.953ec848.js"><link rel="prefetch" href="/redis-operator/assets/js/12.6e7b9675.js"><link rel="prefetch" href="/redis-operator/assets/js/13.15ab90bd.js"><link rel="prefetch" href="/redis-operator/assets/js/14.4805baf2.js"><link rel="prefetch" href="/redis-operator/assets/js/15.bc1d5c33.js"><link rel="prefetch" href="/redis-operator/assets/js/17.8a721a7b.js"><link rel="prefetch" href="/redis-operator/assets/js/18.e3fd1107.js"><link rel="prefetch" href="/redis-operator/assets/js/19.e0c5054d.js"><link rel="prefetch" href="/redis-operator/assets/js/20.6cf0d05c.js"><link rel="prefetch" href="/redis-operator/assets/js/21.91edb875.js"><link rel="prefetch" href="/redis-operator/assets/js/22.5cdac484.js"><link rel="prefetch" href="/redis-operator/assets/js/3.928ebcf0.js"><link rel="prefetch" href="/redis-operator/assets/js/4.eabf691f.js"><link rel="prefetch" href="/redis-operator/assets/js/5.b6c60889.js"><link rel="prefetch" href="/redis-operator/assets/js/6.f09cfcc5.js"><link rel="prefetch" href="/redis-operator/assets/js/7.0d5848e2.js"><link rel="prefetch" href="/redis-operator/assets/js/8.9abf541c.js"><link rel="prefetch" href="/redis-operator/assets/js/9.9ac4a13c.js">
    <link rel="stylesheet" href="/redis-operator/assets/css/0.styles.c80de09e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/redis-operator/" class="home-link router-link-active"><!----> <span class="site-name">Redis Operator</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/redis-operator/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="https://opstree.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OpsTree
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/OT-CONTAINER-KIT/redis-operator" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/redis-operator/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="https://opstree.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OpsTree
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/OT-CONTAINER-KIT/redis-operator" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/redis-operator/guide/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/redis-operator/guide/redis.html" class="sidebar-link">Redis Overview</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Getting Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/redis-operator/guide/installation.html" class="sidebar-link">Installation</a></li><li><a href="/redis-operator/guide/setup.html" class="sidebar-link">Redis Setup</a></li><li><a href="/redis-operator/guide/failover.html" class="sidebar-link">Failover Testing</a></li><li><a href="/redis-operator/guide/exposing-redis.html" aria-current="page" class="active sidebar-link">Exposing Redis</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/redis-operator/guide/exposing-redis.html#exposing-service" class="sidebar-link">Exposing Service</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Configuration</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/redis-operator/guide/redis-config.html" class="sidebar-link">Redis Standalone</a></li><li><a href="/redis-operator/guide/redis-cluster-config.html" class="sidebar-link">Redis Cluster</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Monitoring</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/redis-operator/guide/monitoring.html" class="sidebar-link">Prometheus Monitoring</a></li><li><a href="/redis-operator/guide/grafana.html" class="sidebar-link">Grafana Dashboard</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Development</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/redis-operator/guide/development.html" class="sidebar-link">Development Guide</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Changelog</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/redis-operator/guide/changelog.html" class="sidebar-link">v0.9.0</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="exposing-redis"><a href="#exposing-redis" class="header-anchor">#</a> Exposing Redis</h1> <p>By default, the nature of Redis standalone/cluster setup is private and limited to the Kubernetes cluster only. But we do have a provision to expose it using the Kubernetes &quot;Service&quot; object.
If we can expose the service by doing some configuration inside the helm values for redis standalone and cluster setup. This will create another service in parallel to the internal redis service to expose redis.</p> <p>The service can be exposed with these service types:-</p> <ul><li><strong>NodePort</strong>: Exposes the Service on each Node's IP at a static port (the NodePort). A ClusterIP Service, to which the NodePort Service routes, is automatically created. You'll be able to contact the NodePort Service, from outside the cluster, by requesting <code>&lt;NodeIP&gt;:&lt;NodePort&gt;</code>.</li> <li><strong>LoadBalancer</strong>: Exposes the Service externally using a cloud provider's load balancer. NodePort and ClusterIP Services, to which the external load balancer routes, are automatically created.</li></ul> <h2 id="exposing-service"><a href="#exposing-service" class="header-anchor">#</a> Exposing Service</h2> <p>Customize or create the values file with the following content. The <code>externalService</code> configuration is a common method of exposing service for redis standalone and cluster setup.</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">externalService</span><span class="token punctuation">:</span>
  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
    <span class="token key atrule">service.beta.kubernetes.io/aws-load-balancer-internal</span><span class="token punctuation">:</span> 0.0.0.0/0
  <span class="token key atrule">serviceType</span><span class="token punctuation">:</span> LoadBalancer
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
</code></pre></div><p>Once the values file is customized or created we can apply or upgrade the redis setup. We need to pass the created file as an argument to the <code>helm</code> command.</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># redis standalone</span>
$ helm upgrade redis ot-helm/redis -f custom-values.yaml <span class="token punctuation">\</span>
    --install --namespace ot-operators

<span class="token comment"># redis cluster</span>
$ helm upgrade redis-cluster ot-helm/redis-cluster -f custom-values.yaml <span class="token punctuation">\</span>
  --set redisCluster.clusterSize<span class="token operator">=</span><span class="token number">3</span> --install --namespace ot-operators
</code></pre></div><p>If helm command is completed successfully, we can verify the external service by <code>kubectl</code> command. As we can see in the output, there is an IP in the &quot;EXTERNAL-IP&quot; coloumn.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl get svc -n ot-operators
<span class="token punctuation">..</span>.
NAME                            TYPE           CLUSTER-IP     EXTERNAL-IP      PORT<span class="token punctuation">(</span>S<span class="token punctuation">)</span>                         AGE
redis-external-service          LoadBalancer   <span class="token number">10.103</span>.9.171   <span class="token number">164.52</span>.207.101   <span class="token number">6379</span>:32247/TCP,9121:30708/TCP   4d20h
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/redis-operator/guide/failover.html" class="prev">
        Failover Testing
      </a></span> <span class="next"><a href="/redis-operator/guide/redis-config.html">
        Redis Standalone
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/redis-operator/assets/js/app.5e5a4b40.js" defer></script><script src="/redis-operator/assets/js/2.abb6d572.js" defer></script><script src="/redis-operator/assets/js/16.2eea0f73.js" defer></script>
  </body>
</html>
